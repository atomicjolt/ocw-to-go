{
  "version": 3,
  "sources": ["../src/course.ts"],
  "sourcesContent": ["console.log('navigated', document.location.href);\n\nfunction overrideHomeButton() {\n  document.querySelectorAll(\"[href='https://ocw.mit.edu/']\").forEach(el => {\n    el.addEventListener('click', (e) => {\n      e.preventDefault();\n      window.parent.postMessage({ type: 'goBack' });\n    });\n  });\n}\n\nfunction overridePdfDownload() {\n  const button = document.querySelector('.download-button-container .button-wrapper .download-file')\n  if (!button) return;\n\n  let href = button.getAttribute('href')!\n  if (href.startsWith('./static_resources')) {\n    href = href.replace(/^\\.\\//, '../../');\n  }\n\n  href = href + '?forcedownload=true';\n  button.setAttribute('href', href);\n}\n\nfunction overridePdfThumbnailDownload() {\n  const buttons = document.querySelectorAll(\".resource-thumbnail[href$='.pdf']\");\n  buttons.forEach(button => {\n    let href = button.getAttribute('href')!;\n    if (href.startsWith('./static_resources')) {\n      href = href.replace(/^\\.\\//, '../../');\n    }\n    href = href + '?forcedownload=true';\n    button.setAttribute('href', href);\n    button.removeAttribute('download');\n  });\n}\n\nasync function injectOfflineVideos() {\n  console.log(await caches.keys());\n  const downloadButton = document.querySelector('.video-player-wrapper [aria-label=\"Download video\"]');\n  if (!downloadButton) return;\n  const wrapper = document.querySelector<HTMLElement>('.video-player-wrapper')!;\n\n  const href = downloadButton.getAttribute('href');\n  if (!href) return;\n  const exists = await caches.match(href)\n  if (!exists) return\n  wrapper.style.display = 'none';\n\n  const video = document.createElement('video');\n  video.style.width = '100%';\n  video.controls = true;\n  // video.style.display = 'none';\n  const source = document.createElement('source');\n  source.type = 'video/mp4';\n  source.src = href;\n  video.appendChild(source);\n\n  // video.addEventListener('canplay', () => {\n  // video.style.display = 'block';\n  // })\n\n  document.querySelector('.video-player-wrapper')!.after(video);\n}\n\nfunction init() {\n  overrideHomeButton()\n  overridePdfDownload()\n  overridePdfThumbnailDownload()\n  injectOfflineVideos()\n}\n\ninit();\n"],
  "mappings": ";;;AAAA,UAAQ,IAAI,aAAa,SAAS,SAAS,IAAI;AAE/C,WAAS,qBAAqB;AAC5B,aAAS,iBAAiB,+BAA+B,EAAE,QAAQ,QAAM;AACvE,SAAG,iBAAiB,SAAS,CAAC,MAAM;AAClC,UAAE,eAAe;AACjB,eAAO,OAAO,YAAY,EAAE,MAAM,SAAS,CAAC;AAAA,MAC9C,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAEA,WAAS,sBAAsB;AAC7B,UAAM,SAAS,SAAS,cAAc,2DAA2D;AACjG,QAAI,CAAC,OAAQ;AAEb,QAAI,OAAO,OAAO,aAAa,MAAM;AACrC,QAAI,KAAK,WAAW,oBAAoB,GAAG;AACzC,aAAO,KAAK,QAAQ,SAAS,QAAQ;AAAA,IACvC;AAEA,WAAO,OAAO;AACd,WAAO,aAAa,QAAQ,IAAI;AAAA,EAClC;AAEA,WAAS,+BAA+B;AACtC,UAAM,UAAU,SAAS,iBAAiB,mCAAmC;AAC7E,YAAQ,QAAQ,YAAU;AACxB,UAAI,OAAO,OAAO,aAAa,MAAM;AACrC,UAAI,KAAK,WAAW,oBAAoB,GAAG;AACzC,eAAO,KAAK,QAAQ,SAAS,QAAQ;AAAA,MACvC;AACA,aAAO,OAAO;AACd,aAAO,aAAa,QAAQ,IAAI;AAChC,aAAO,gBAAgB,UAAU;AAAA,IACnC,CAAC;AAAA,EACH;AAEA,iBAAe,sBAAsB;AACnC,YAAQ,IAAI,MAAM,OAAO,KAAK,CAAC;AAC/B,UAAM,iBAAiB,SAAS,cAAc,qDAAqD;AACnG,QAAI,CAAC,eAAgB;AACrB,UAAM,UAAU,SAAS,cAA2B,uBAAuB;AAE3E,UAAM,OAAO,eAAe,aAAa,MAAM;AAC/C,QAAI,CAAC,KAAM;AACX,UAAM,SAAS,MAAM,OAAO,MAAM,IAAI;AACtC,QAAI,CAAC,OAAQ;AACb,YAAQ,MAAM,UAAU;AAExB,UAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,UAAM,MAAM,QAAQ;AACpB,UAAM,WAAW;AAEjB,UAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,OAAO;AACd,WAAO,MAAM;AACb,UAAM,YAAY,MAAM;AAMxB,aAAS,cAAc,uBAAuB,EAAG,MAAM,KAAK;AAAA,EAC9D;AAEA,WAAS,OAAO;AACd,uBAAmB;AACnB,wBAAoB;AACpB,iCAA6B;AAC7B,wBAAoB;AAAA,EACtB;AAEA,OAAK;",
  "names": []
}
